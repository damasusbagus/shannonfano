<script type="text/javascript">
	function frequency(str){
		var freqs={};
		for (var i in str){

			if(freqs[str[i]]==undefined){

				freqs[str[i]]=1;
			}
			else {
				freqs[str[i]]=freqs[str[i]]+1;
			}
		}

		return freqs;
	}

	function sortfreq(freqs){
		var tuples=[];
		for( var let in freqs){
			tuples.push([freqs[let],let]);
		}
		return tuples;
		// return tuples.reverse();
	}

	function sortFunction(a, b) {
		if (a[0] === b[0]) {
			return 0;
		}
		else {
			return (a[0] < b[0]) ? -1 : 1;
		}
	}

  //Tabel SF
  var bit = {};
  function tableSF(tuples)
  {
  	var total=0;
  	for(var i in tuples){
  		total += tuples[i][0];
  	}

  	var result = 0;
  	for (var i = 0; i < tuples.length; i++) {
  		result+=tuples[i][0];
  		if (result >= total-result) {
  			var point = i+1;
  			break;
  		}	  	
  	}

  	var up=[],
  	down=[];
  	for (var i = 0; i < point; i++) {
  		up.push(tuples[i]);
  		if(bit[tuples[i][1]] == undefined) {
  			bit[tuples[i][1]] = '0';
  		}
  		else {
  			bit[tuples[i][1]] += '0';
  		}
  	}

  	for (var i = point; i < tuples.length; i++) {
  		down.push(tuples[i]);
  		if(bit[tuples[i][1]] == undefined) {
  			bit[tuples[i][1]] = '1';
  		}
  		else {
  			bit[tuples[i][1]] += '1';
  		}
  	}


  	if(up.length>1){tableSF(up)}
  		if(down.length>1){tableSF(down)}
  			// console.log(bit);
  			return bit;
  	}

  	function encode(text,bit) {
  		output = '';
  		for(s in text)
  			output+=bit[text[s]];
  		return output;
  	}
  	function decode(tableSF,encoded)  
  	{ 
  		var start = 0,
  			output = '';

  		for(var i = 1; i < encoded.length+1; i++) {
  			substring = encoded.substring(start,i);
  			var test = getKeyByValue(tableSF, substring)
  			if (test != undefined) {
  				start = i;
  				output += test;
  				
  			}
  		}
  		return output;
  	}  

  	function getKeyByValue(object, value) {
  		return Object.keys(object).find(key => object[key] === value);
  	}


//Source
var text = 'According to the formulations of Daniels,[3] abjads differ from alphabets in that only consonants, not vowels, are represented among the basic graphemes. Abjads differ from abugidas, another category defined by Daniels, in that in abjads, the vowel sound is implied by phonology, and where vowel marks exist for the system, such as nikkud for Hebrew and ḥarakāt for Arabic, their use is optional and not the dominant (or literate) form. Abugidas mark the vowels (other than the "inherent" vowel) with a diacritic, a minor attachment to the letter, or a standalone glyph. Some abugidas use a special symbol to suppress the inherent vowel so that the consonant alone can be properly represented. In a syllabary, a grapheme denotes a complete syllable, that is, either a lone vowel sound or a combination of a vowel sound with one or more consonant sounds.',
frequency = frequency(text),
array2D = sortfreq(frequency),
sort = array2D.sort(function(a, b) {
  return b[0] - a[0];
}),
tableSF = tableSF(sort);
console.log('text : '+text);
console.log(frequency);
console.log(sort);
console.log(tableSF);
encode = encode(text,tableSF);
decode = decode(tableSF,encode);
console.log(encode);
console.log(decode);
</script>