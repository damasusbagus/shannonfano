<!DOCTYPE html>
<html>
<head>
	<title>Shannon Fano</title>
	<link rel="stylesheet" href="bootstrap.css">
	<script src="jquery-3.2.1.min.js"></script>
	<script src='custom.js'></script>
	<script type="text/javascript">

		$(document).ready(function(){

			  
			$('.whitespace').click(function(){
				var message = $('.message').val(),
					secret = $('.secret').val(),
					symbol = '`';
					result;
				// console.log('secret = '+result);

				 secret = text2Binary (secret,result);
				 // console.log('secret binary = '+secret);

				 console.log('symbol : '+symbol)

				 //convert symbol -> binary -> whitespace
				 symbol = text2Binary(symbol);
				 console.log('binary symbol : '+symbol);
				 symbol = binarytowhitespace(symbol);
				 console.log('whitespace symbol : '+symbol);

				 // convert secret message from binary ro whitespace
				 secret = binarytowhitespace(secret);
				 // console.log('whitespace = '+secret);


				 //combine all data to be result
				 result = message+symbol+secret;
				 console.log('result = '+result);
				 $('#result').val(result);
				 $('.source').val(result);


				 // Decription process
				 var source = $('#result').val(),
				 	 symbol = '`',
			 		 SymbolConvert = binarytowhitespace(text2Binary(symbol)), //convert symbol to whitespace
				 	 SymbolPosition = detect(source,SymbolConvert);
				 	 console.log('detect : '+SymbolPosition);

				 	 // get secret code by delete first 'SymbolPosition' letter
				 	 secret = source.substr(SymbolPosition);
				 	 console.log('source delete : '+secret);

				 	 // get first 'SymbolPosition' letter
				 	 message = source.slice(0, SymbolPosition-8);
					 console.log('message : '+message);

					 // convert whitespace to text
				 	 secret = binarytotext(whitespacetobinary(secret));
				 	 // console.log(secret);

				 	 $('#decript').val(message+secret);


		 		var a = result.toString();
		 			b = getFrequency(a),
		 			c = sortAssocObject(b);



				console.log(b);
				console.log(c);

			});
			

			$('.shannon-fano').click(function(){
				var source = $('#result').val();
				console.log(compressText(source))
			});
		});
	</script>
	<link rel="stylesheet" type="text/css" href="style.css">
	<style type="text/css">

	</style>
</head>

<body onload="checkFileAPI();">
	<div id="page-wrap">
		<div class="menu">
			<div class="container" onclick="myFunction(this)">
				<div class="bar1"></div>
				<div class="bar2"></div>
				<div class="bar3"></div>
			</div>
			<h3>Menu</h3>
			<div class="tabBlock">
				<ul class="menu-list">
					<li class="enkripsi">> Enkripsi</li>
					<li class="dekripsi">> Dekripsi</li>
					<li class="kompresi">> Kompresi</li>
					<li class="dekompresi">> Dekompresi</li>
				</ul>
			</div>
		</div>
		<div class="content enkripsi">
			<h3>Enkripsi Whitespace</h3>
			<div class="input">
				<h4>Masukkan Teks</h4>
				<textarea rows="4" cols="50" class="form-control row-1 text" placeholder="Masukkan teks di sini"></textarea>
				<h4>Masukkan Pesan Rahasia</h4>
				<textarea rows="4" cols="50" class="form-control secret" placeholder="Masukkan pesan rahasia di sini"></textarea>
				<button type="button" class="btn btn-default enkripsi">Enkripsi</button>
			</div>
			
			<div class="output">
				<h4>Hasil Enkripsi</h4>
				<textarea rows="4" cols="50" class="form-control" placeholder="Hasil enkripsi akan muncul di sini" readonly></textarea>
				<a href="" id="SimpanEnkripsi"><button type="button" class="btn btn-default">Simpan File</button></a>
			</div>
			

		</div>
		<div class="content dekripsi">
			<h3>Dekripsi Whitespace</h3>
			<div class="input">
				<p>Silahkan pilih file yang telah di enkripsi</p>
				<input type="file" onchange='readText(this)' class="btn btn-default">
				<h5>Isi File</h5>
				<textarea rows="4" cols="50" class="form-control" placeholder="Isi file akan tampil di sini" readonly></textarea>
				<button type="button" class="btn btn-default dekripsi">Dekripsi</button>
			</div>
			<div class="output">
				<h4>Hasil Dekripsi</h4>
				<textarea rows="4" cols="50" class="form-control" placeholder="Hasil dekripsi akan muncul di sini" readonly></textarea>
				<a href="" id="SimpanDekripsi"><button type="button" class="btn btn-default">Simpan File</button></a>
			</div>
		</div>
		<div class="content kompresi">
			<h3>Kompresi Shannon Fano</h3>
			<div class="input">
				<p>Silahkan pilih file yang akan dikompres</p>
				<input type="file" onchange='readText(this)' class="btn btn-default">
				<h5>Isi File</h5>
				<textarea rows="4" cols="50" class="form-control" placeholder="Isi file akan tampil di sini" readonly></textarea>
				<button type="button" class="btn btn-default">Kompres</button>
			</div>
			<div class="output">
				<h4>Hasil Kompresi</h4>
				<textarea rows="4" cols="50" class="form-control" placeholder="Isi file setelah melalui proses kompresi" readonly></textarea>
			</div>
			<button type="button" class="btn btn-default">Simpan File</button>
		</div>
		<div class="content dekompresi">
			<h3>Dekompresi Shannon Fano</h3>
			<div class="input">
				<p>Silahkan pilih file yang akan didekompres</p>
				<button type="button" class="btn btn-default">Buka File</button>
				<h5>Isi File</h5>
				<textarea rows="4" cols="50" class="form-control" placeholder="Isi file akan tampil di sini" readonly></textarea>
			</div>
			<button type="button" class="btn btn-default">Dekompres</button>
			<div class="output">
				<h4>Hasil Dekompresi</h4>
				<textarea rows="4" cols="50" class="form-control" placeholder="Isi file setelah melalui proses dekompresi" readonly></textarea>
			</div>
			<button type="button" class="btn btn-default">Simpan File</button>
		</div>
	</div>

	<!-- <div style="display: inline-block; width: 50%; border: 1px solid gray;">
		<div>Please Insert Your Message Here</div>
		<div>
			<input class="message" type="text" name="message" value='abc'>
		</div>
	</div>
	<div style="display: inline-block; width: 50%; border: 1px solid gray;">
		<div>Please Insert Your Secret Message Here</div>
		<div>
			<input class="secret" type="text" name="secret" value='123'>
		</div>
	</div>
	<div style="text-align: center;"><button type="button" class='whitespace'>Generate</button></div>
	<div>Result</div>
	<div><input id="result"></div>

	<div>Decript Result</div>
	<input id='decript'>

	<div class='compression'>
		<h1>Shannon Fano</h1>
		<input class='source'>
	</div>
	<button class="shannon-fano">compress</button>
	<input class='result-compress'> -->
</body>

</html